---
title: 'Babel'
date: 2020-10-26 12:00:00
category: 'web'
draft: false
---

> ì´ ê¸€ì€ ìœ¤ì¤€ì„±ì˜ ê°œë°œê¼¬ë§¹ì´ ì‹œì ˆ, í˜¼ì ë…¸ì…˜ì— ê³µë¶€í•˜ë©° ì •ë¦¬í•´ë‘” ê²ƒ ì¤‘ ê´œì°®ì€ ê²ƒì„ ì¶”ë ¤ì˜¬ë¦° ê¸€ì…ë‹ˆë‹¤.
> ê¸°ìˆ ë¸”ë¡œê·¸ ê¸€ ê¸°ê³  ëª©ì ìœ¼ë¡œ ì‘ì„±ë˜ì§€ ì•Šì•„, ê°€ë…ì„±ì´ ì¢‹ì§€ ì•Šê±°ë‚˜ ì•Œ ìˆ˜ ì—†ëŠ” ì›Œë”©ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

[What is Babel? Â· Babel](https://babeljs.io/docs/en/)

[í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œí™˜ê²½ì˜ ì´í•´: Babel](https://jeonghwan-kim.github.io/series/2019/12/22/frontend-dev-env-babel.html)

## íŠ¸ëœìŠ¤íŒŒì¼ëŸ¬(transpiler)

### íŠ¸ëœìŠ¤íŒŒì¼ vs ì»´íŒŒì¼

- ì»´íŒŒì¼: í•œ ì–¸ì–´ë¡œ ì‘ì„±ëœ ì†ŒìŠ¤ ì½”ë“œë¥¼ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒ
    - Java â†’ bytecode
    - c â†’ assembly
- íŠ¸ëœìŠ¤íŒŒì¼: í•œ ì–¸ì–´ë¡œ ì‘ì„±ëœ ì†ŒìŠ¤ ì½”ë“œë¥¼ ë¹„ìŠ·í•œ ìˆ˜ì¤€ì˜ ì¶”ìƒí™”ë¥¼ ê°€ì§„ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒ
    - es6 â†’ es5
    - c++ â†’ c
    - typescript â†’ javascript

<aside>
ğŸ’¡ transpileì´ compileì— í¬í•¨ë˜ëŠ” ê°œë…ì´ë¼ê³ ë„ í•  ìˆ˜ ìˆë‹¤!

</aside>

### ë°”ë²¨

- êµ¬ ë¸Œë¼ìš°ì €ëŠ” ES6 ì´ìƒì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¬¸ë²•ì„ ì´í•´í•˜ì§€ ëª»í• ìˆ˜ë„ ìˆë‹¤!
- ì´ëŸ° ìµœì‹  ECMAScriptë¥¼ ES5ì´í•˜ì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¬¸ë²•ìœ¼ë¡œ transpileí•´ì£¼ëŠ” ê²ƒì´ ë°”ë²¨
- ì¥ì 
    - ë‹¤ì–‘í•œ í”ŒëŸ¬ê·¸ì¸ì„ ì‰½ê²Œ ì¶”ê°€í•´ì„œ ì“¸ ìˆ˜ ìˆë‹¤
    - ìºì‹± + ë‹¨ì¼ íŒŒì¼ ë°©ì¶œ ì„¤ê³„ë¡œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì»´íŒŒì¼ë³´ë‹¤ ë” ë¹ ë¥´ë‹¤
- 

## ë°”ë²¨ë¡œ ì‘ì—…í•˜ê¸°

```jsx
// yarn add -D @babel/core
// ì´í›„ babel.config.json í˜¹ì€ babel.config.jsë¥¼ ì‘ì„±í•´ì•¼ í•œë‹¤.

const presets = [
  [
    "@babel/env",
    {
      targets: {
        edge: "17",
        firefox: "60",
        chrome: "67",
        safari: "11.1",
      },
      useBuiltIns: "usage",
      "corejs": "3.6.4",
    },
  ],
];

module.exports = { presets };
```

## @babel/core

```jsx
// ë°”ë²¨ì˜ í•µì‹¬ ê¸°ëŠ¥ì„ ë‹´ëŠ” íŒ¨í‚¤ì§€ë¡œ ì•„ë˜ì™€ ê°™ì€ ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤!

const babel = require('@babel/core');

babel.transform('code', optionsObject);
```

í•˜ì§€ë§Œ ì•„ì§ê¹Œì§€ëŠ” 'code' ìë¦¬ì— ë¬´ì—‡ì„ ë„£ì–´ë„ ë™ì¼í•œ ê°’ì´ ë¦¬í„´ë  ë¿ì´ë‹¤.

## @babel/cli

```bash
# ì•„ë˜ ëª…ë ¹ì–´ëŠ” srcì˜ íŒŒì¼ë“¤ì„ libì´ë¼ëŠ” í´ë”ì— transpile í•´ì¤€ë‹¤
yarn add -D @babel/cli
yarn babel src --out-dir lib

# í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•  ìˆ˜ë„ ìˆë‹¤
# ì•„ë˜ì˜ ëª…ë ¹ì–´ë¡œ ë¹„ë¡œì†Œ 'code'ì† í™”ì‚´í‘œ í•¨ìˆ˜ëŠ” function(){} ë¬¸ë²•ìœ¼ë¡œ ëŒ€ì²´ëœë‹¤
# ì¦‰, í”ŒëŸ¬ê·¸ì¸ì€ babelì´ ì½”ë“œë¥¼ transpileí•˜ëŠ” ê·œì¹™ë“¤ì´ë‹¤
yarn add -D @babel/plugin-transform-arrow-functions
yarn babel src --out-dir lib --plugins=@babel/plugin-transform-arrow-functions
```

## plugins

- ì¼ì¼ì´ í”ŒëŸ¬ê·¸ì¸ì„ ì ìš©í•˜ê³  ì‹¶ì„ë–„ë§ˆë‹¤ clië¡œ ì…ë ¥í•´ì£¼ê¸°ì—ëŠ” ë²ˆê±°ë¡­ë‹¤
- babel.configì— í”ŒëŸ¬ê·¸ì¸ë“¤ì„ ë¯¸ë¦¬ ì¶”ê°€í•´ ë†“ìœ¼ë©´ í„°ë¯¸ë„ ìƒì—ì„œ í”ŒëŸ¬ê·¸ì¸ë“¤ì„ ì…ë ¥í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

```jsx
module.exports = {
  plugins: [
    '@babel/plugin-transform-block-scoping',
    '@babel/plugin-transform-arrow-functions',
  ],
};
```

## í”„ë¦¬ì…‹(preset)

- ìœ„ì—ì„œ í”ŒëŸ¬ê·¸ì¸ì„ í•˜ë‚˜ ì ìš©í–ˆëŠ”ë°, ë§¤ë²ˆ í•„ìš”í•œ í”ŒëŸ¬ê·¸ì¸ë“¤ì„ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•˜ëŠ”ê°€?
- í•„ìš”í•œ í”ŒëŸ¬ê·¸ì¸ë“¤ì„ ëª¨ì•„ì„œ í”„ë¦¬ì…‹ìœ¼ë¡œ ë¬¶ì–´ë†“ì!
    - ìœ„ì˜ í”ŒëŸ¬ê·¸ì¸ ë‘ê°œë¥¼ í•˜ë‚˜ì˜ í”„ë¦¬ì…‹ìœ¼ë¡œ ë¬¶ì€ ì˜ˆì œ
    
    ```jsx
    function mypreset() {
      return {
        plugins: [
          "@babel/plugin-transform-arrow-functions",
          "@babel/plugin-transform-block-scoping",
          "@babel/plugin-transform-strict-mode",
        ],
      }
    }
    
    module.exports = {
    	presets: [
    		mypreset(),
    	],
    };
    ```
    
- ë°”ë²¨ ê³µì‹ í”„ë¦¬ì…‹ì´ 4ê°€ì§€ ìˆë‹¤
    - preset-env
        - preset-reset-es2015, preset-reset-es2016, preset-reset-es2017, preset-reset-latestì„ í•©ì³ë†“ì€ê²ƒ
        - ECMAScript2015+ë¥¼ ë³€í™˜í•˜ëŠ” í”„ë¦¬ì…‹
    - preset-flow
    - preset-react
    - preset-typescript
        - flow, react, typescriptë¥¼ ë³€í™˜í•˜ê¸° ìœ„í•œ í”„ë¦¬ì…‹ì´ë‹¤.

### @babel/preset-env

- ì–´ë–¤ ë²„ì „ì˜ ë¸Œë¼ìš°ì €(or Node)ê¹Œì§€ ì§€ì›í• ì§€ ë“±ì„ target ì†ì„±ìœ¼ë¡œ ì§€ì •í•´ì¤„ ìˆ˜ ìˆë‹¤

```jsx
// babel.config.js
module.exports = {
  presets: [
    [
      "@babel/preset-env",
      {
        targets: {
          chrome: "79", // í¬ë¡¬ 79ê¹Œì§€ ì§€ì›í•˜ëŠ” ì½”ë“œë¥¼ ë§Œë“ ë‹¤
					ie: "11", // ie 11ê¹Œì§€ ì§€ì›í•˜ëŠ” ì½”ë“œë¥¼ ë§Œë“ ë‹¤
					node: 'current',
        },
      },
    ],
  ],
}
```

- promiseëŠ” ê°„ë‹¨í•œ ìŠ¤ì½”í•‘ ëŒ€ì²´ë¡œ í•´ê²°ë  ë¬¸ì œê°€ ì•„ë‹ˆë‹¤
    - ES5ì—ì„œ promiseëŠ” 'êµ¬í˜„'í•˜ëŠ” ìˆ˜ë°–ì— ì—†ë‹¤
    - í´ë¦¬í•„ì´ë¼ëŠ” ì½”ë“œì¡°ê°ì„ ì¶”ê°€í•´ì¤˜ì•¼ í•œë‹¤
    - ìš°ë¦¬ëŠ” í´ë¦¬í•„ íŒ¨í‚¤ì§€ ì¤‘ í•˜ë‚˜ì¸ core-jsë¥¼ ì´ìš©í•œë‹¤

```jsx
// babel.config.js:
module.exports = {
  presets: [
    [
      "@babel/preset-env",
      {
        useBuiltIns: "usage", // í´ë¦¬í•„ ì‚¬ìš© ë°©ì‹ ì§€ì •, usage, entry, false(default)
        corejs: {
          // í´ë¦¬í•„ ë²„ì „ ì§€ì •
          version: 2,
        },
      },
    ],
  ],
}
```